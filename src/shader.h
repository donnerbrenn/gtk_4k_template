/* File generated with Shader Minifier 1.1.5
 * http://www.ctrl-alt-test.fr
 */
#ifndef SHADER_H_
# define SHADER_H_
# define VAR_COLOR "m"

const char *shader_frag =
 "#version 400\n"
 "vec3 v=vec3(0,0,-6),f=normalize(vec3((gl_FragCoord.xy.xy/vec2(1280.,720.)-1)*vec2(1,.5625),1)),d=v,r[10],M[3];"
 "out vec3 m;"
 "float l=0;"
 "float t(vec2 v)"
 "{"
   "return v=fract(v*vec2(233.34,851.74)),v+=dot(v,v+23.45),fract(v.x*v.y);"
 "}"
 "vec3 t(vec3 d,vec3 v)"
 "{"
   "float f=cos(v.x),m=sin(v.x);"
   "mat3 M=mat3(vec3(1,0,0),vec3(0,f,-m),vec3(0,m,f));"
   "f=cos(v.y);"
   "m=sin(v.y);"
   "M*=mat3(vec3(f,0,m),vec3(0,1,0),vec3(-m,0,f));"
   "f=cos(v.z);"
   "m=sin(v.z);"
   "M*=mat3(vec3(f,-m,0),vec3(m,f,0),vec3(0,0,1));"
   "return M*d;"
 "}struct MA{float d;vec3 col;bool hit;};"
 "MA t(vec3 v,float f,float d,float m,float M,vec3 t)"
 "{"
   "vec2 l=vec2(length(v.xz),v.y),r=vec2(m,f),x=vec2(m-d,2.*f),y=vec2(l.x-min(l.x,l.y<0.?d:m),abs(l.y)-f),z=l-r+x*clamp(dot(r-l,x)/dot(x,x),0.,1.);"
   ""
   "return MA(z.x<0.&&y.y<0.?-1.:1.*sqrt(min(dot(y,y),dot(z,z)))-M,t,false);"
 "}"
 "MA t(vec3 v,vec3 d,float m,vec3 f)"
 "{"
   "vec3 l=abs(v)-d;"
   ""
   "return MA(length(max(l,0.))+min(max(l.x,max(l.y,l.z)),0.)-m,f,false);"
 "}"
 "MA n(vec3 v,vec3 f,float d,vec3 m)"
 "{"
   ""
   "return MA(dot(v,f)+d,m,false);"
 "}"
 "MA n(MA v,MA d)"
 "{"
   "return v.d<d.d?v:d;"
 "}"
 "MA x(MA v,MA d)"
 "{"
   "return v.d>d.d?v:d;"
 "}"
 "float n(float v,float f,float d)"
 "{"
   ""
   "return min(v,f)-pow(max(d-abs(v-f),0.),2)*.25/d;"
 "}"
 "MA n(vec3 v)"
 "{"
   "v=t(t(v,vec3(-.7,0.,-.04)),vec3(0,1.1,0));"
   "v.y-=1.05;"
   "v.x+=.5;"
   "MA f=n(v+vec3(0,1.25,0),vec3(0,1,0),1.,vec3(.03)),d=t(v+vec3(0,.1,0),1.,.15,.25,0,vec3(.4,0,0)),l=t(v+vec3(0,.6,0),.05,.3,.3,.05,vec3(-.015)),m=t(v+vec3(0,1.,0),.3,.6,.6,.05,vec3(-.015)),y=t(v+vec3(0,1.4,0),vec3(.9,.15,.9),.1,vec3(-.015)),M=n(t(v+vec3(1.75,1.34,.75),.05,.55,.45,.02,vec3(.4,0,0)),t(v+vec3(1.75,1.34,-.75),.05,.55,.45,.02,vec3(.4,0,0)));"
   "M.d-=.0005;"
   "MA x=n(t(v+vec3(1.75,1.27,-.75),.05,.4,.4,.015,vec3(.4,0,0)),t(v+vec3(1.75,1.27,.75),.05,.4,.4,.015,vec3(.4,0,0))),z=t(v+vec3(.5,1.85,0),vec3(1.55,0.,1.05),.45,vec3(-.015)),r=t(v+vec3(10,sin(v.x*1.8)*.1+2.05,sin(sin(v.x*.7))+.75),vec3(8,0,0),.1,vec3(-.015)),i=t(v+vec3(0.,-1.,0.),vec3(0),.5,vec3(.4,0,0));"
   ""
   "MA s=t(mod(v,.0001)-5e-05,vec3(0.),t(v.xz)*.002,vec3(-.015));"
   "f.d=mix(f.d,s.d,.05);"
   "v=t(t(v,vec3(-.5,0,0)),vec3(0,1.5,0));"
   "MA e=MA(0.,vec3(-.015),true);"
   "e.d=n(m.d,y.d,.15);"
   "e.d=n(e.d,l.d,.05);"
   "i=n(i,d);"
   "i=n(i,z);"
   "i.d=mix(i.d,s.d,.3);"
   "i=n(i,e);"
   "i=n(i,M);"
   "i=n(i,x);"
   "i=n(i,f);"
   "return n(i,r);"
 "}"
 "MA t(vec3 v,vec3 f,float m)"
 "{"
   "MA M;"
   "while(l<80&&length(v-d)<m&&!M.hit)"
     "d+=M.d*f,M=n(d),M.hit=M.d<.0001,l+=1.;"
   "return M;"
 "}"
 "vec3 x(vec3 v)"
 "{"
   "mat3 m=mat3(v,v,v)-mat3(.005);"
   "return normalize(n(v).d-vec3(n(m[0]).d,n(m[1]).d,n(m[2]).d));"
 "}"
 "float n(in vec3 v,in vec3 d,float m,float f,float M)"
 "{"
   "float i=1.,r=1e+20;"
   "for(float l=m;l<f;)"
     "{"
       "float x=n(v+d*l).d;"
       "if(x<.001)"
         "return 0.;"
       "float y=x*x/(2.*r);"
       "i=min(i,M*sqrt(x*x-y*y)/max(0.,l-y));"
       "r=x;"
       "l+=x;"
     "}"
   "return i;"
 "}"
 "vec3 x(vec3 v,vec3 d,vec3 m,float x)"
 "{"
   "vec3 i;"
   "for(int l=0;l<3;l++)"
     "{"
       "float y=max(0.,dot(reflect(r[l],d),f));"
       "i+=(y*x*.333+pow(y,64)*x*3)*M[l]*n(v,r[l],.1,20.,25);"
     "}"
   "return m+i;"
 "}"
 "void main()"
 "{"
   "r[0]=normalize(vec3(0,10,-2));"
   "r[1]=normalize(vec3(-50,20,-50));"
   "r[2]=normalize(vec3(-50,60,-7));"
   "vec2 l=vec2(.5,.7);"
   "M[0]=l.xxy*2;"
   "M[1]=l.xyx;"
   "M[2]=l.yxx*.75;"
   "MA i=t(v,f,20);"
   "vec3 y=x(d);"
   "if(i.hit)"
     "{"
       "m=i.col;"
       "m=x(d,y,i.col,.1);"
       "if(i.col==vec3(-.015))"
         "{"
           "d-=f*.01;"
           "f=normalize(reflect(f,y));"
           "i=t(d,f,2.5);"
           "if(i.hit)"
             "m=mix(m,x(d,x(d),i.col,.1),.1);"
         "}"
     "}"
   "m=sqrt(m*(1.-length(v-d)*.05));"
 "}";

#endif // SHADER_H_
